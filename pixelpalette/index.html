<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PIXELPALETTE</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.js"></script>
  <link href="https://cdn.jsdelivr.net/gh/dinoqqq/simple-popup@master/dist/jquery.simple-popup.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #1e1e2d;
    }
    input, textarea, button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
      color: #333;
    }
    .logo-container {
      text-align: center;
      padding: 20px 0;
    }
    .logo-container img {
      max-width: 100%;
      height: auto;
    }
    /* 폼 영역 텍스트 색상 변경 */
    center p {
      color: #fffff0;
    }
    /* 설명 문구 스타일 */
    .description {
      color: #fffff0;
      text-align: center;
      max-width: 1200px;
      margin: 0 auto 20px;
      line-height: 1.6;
      padding: 0 20px;
      font-size: 24px;
      font-weight: 300;
    }
    .faq-section {
      max-width: 800px;
      margin: 0 auto 60px;
      padding: 0 20px;
      color: #fffff0;
    }

    .faq-section h2 {
      text-align: center;
      font-size: 38px;
      margin-bottom: 30px;
      font-weight: 300;
    }

    .faq-item {
      margin-bottom: 25px;
    }

    .faq-question {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .faq-answer {
      font-size: 16px;
      line-height: 1.6;
      color: #fffff0cc;
      padding-left: 20px;
    }
    .notice {
      text-align: center;
      color: #ffd700;
      font-size: 16px;
      margin: 20px auto;
      padding: 15px 30px;
      max-width: fit-content;
      border: 1px solid #ffd700;
      border-radius: 5px;
      background-color: rgba(255, 215, 0, 0.1);
      display: inline-block;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
    }
  </style>
</head>

<script>
  document.addEventListener('contextmenu', function (e) {
    e.preventDefault();
  });
</script>


<body>
  <div class="logo-container">
    <img src="images/logo.png" alt="Pixel Palette Logo">
  </div>

  <p class="description">
    PIXELPALETTE.COM은 사용자의 요구에 따라 자동으로 픽셀아트에 사용할 팔레트를 생성해주는 웹사이트 입니다.<br>
    팔레트에 들어갈 색 개수, 팔레트의 분위기, 대표색 등의 간단한 정보만으로 원하는 팔레트를 만들어보세요.
  </p>

  <div class="notice">
    본 페이지는 서비스를 런칭 하기 전, 아이디어에 대한 피드백 수집을 목적으로 제작된 데모 페이지입니다.
  </div>

  <div class="faq-section">
    <h2>FAQ</h2>
    
    <div class="faq-item">
      <div class="faq-question">1. 이 사이트는 어떤 기준으로 색 팔레트를 만들어 주나요?</div>
      <div class="faq-answer">사용자가 입력한 색 개수, 분위기(예: 따뜻한, 차가운, 복고풍), 대표색 등을 바탕으로 알고리즘이 자동 생성합니다.</div>
    </div>

    <div class="faq-item">
      <div class="faq-question">2. 생성된 팔레트는 상업적으로 사용해도 되나요?</div>
      <div class="faq-answer">네, 생성된 팔레트는 자유롭게 사용하실 수 있으며, 개인 및 상업 프로젝트에 제한 없이 활용 가능합니다.</div>
    </div>

    <div class="faq-item">
      <div class="faq-question">3. 팔레트를 저장하거나 다시 불러올 수 있나요?</div>
      <div class="faq-answer">생성된 팔레트를 PNG 파일로 다운로드할 수 있습니다.</div>
    </div>

    <div class="faq-item">
      <div class="faq-question">4. 팔레트에 포함될 색상 수는 최대 몇 개까지 설정할 수 있나요?</div>
      <div class="faq-answer">최소 2개에서 최대 64개까지 설정 가능합니다.</div>
    </div>

    <div class="faq-item">
      <div class="faq-question">5. 이 사이트는 무료인가요?</div>
      <div class="faq-answer">네, 기본적인 팔레트 생성 기능은 모두 무료입니다.</div>
    </div>

    <div class="faq-item">
      <div class="faq-question">6. 생성된 팔레트를 미리보기로 확인할 수 있나요?</div>
      <div class="faq-answer">네, 팔레트가 적용된 예제 픽셀아트 샘플을 함께 제공하여, 실제 사용 시 느낌을 미리 확인할 수 있습니다.</div>
    </div>
  </div>

  <!-- 폼 영역 -->
  <center>
    <p>이메일을 남겨주세요.</p>
    <input id="submit-email" type="email" placeholder="이메일을 남겨주세요." /><br><br>
    <p>아이디어에 대한 피드백을 남겨주세요.(선택)</p>
    <textarea id="submit-advice" cols="40" rows="5" placeholder="아이디어에 대한 피드백을 남겨주세요"></textarea><br>
    <button style="width:350px;" id="submit">제출!</button>
  </center>

  <!-- 팝업 -->
  <div id="popup" style="display:none;">
    <h1>감사합니다.</h1>
    <p>이제는 우리는 같은 배를 탔습니다.</p>
  </div>

  <!-- 스크립트 -->
  <script>
    const addrScript = "https://script.google.com/macros/s/AKfycbzMH40wWz3hIE2gKufTRcvHTb2j9c1PCsmPuXHVB9yOvGSdxJOeEEf4xkovLy1ULZ-QBA/exec";
    let ip = "unknown";

    function padValue(value) {
      return (value < 10) ? "0" + value : value;
    }

    function getTimeStamp() {
      const date = new Date();
      return `${padValue(date.getFullYear())}-${padValue(date.getMonth() + 1)}-${padValue(date.getDate())} ${padValue(date.getHours())}:${padValue(date.getMinutes())}:${padValue(date.getSeconds())}`;
    }

    function getCookieValue(name) {
      const value = "; " + document.cookie;
      const parts = value.split("; " + name + "=");
      if (parts.length === 2) return parts.pop().split(";").shift();
    }

    function setCookieValue(name, value, days) {
      const expires = new Date(Date.now() + days * 86400000).toUTCString();
      document.cookie = `${name}=${value}; expires=${expires}; path=/`;
    }

    function getUVfromCookie() {
      let uv = getCookieValue("user");
      if (!uv) {
        uv = Math.random().toString(36).substring(2, 8).toUpperCase();
        setCookieValue("user", uv, 180);
      }
      return uv;
    }

    function sendVisitorInfo() {
      const utm = new URLSearchParams(location.search).get("utm") || "";
      const mobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) ? 'mobile' : 'desktop';

      const data = JSON.stringify({
        "id": getUVfromCookie(),
        "landingUrl": window.location.href,
        "ip": ip,
        "referer": document.referrer,
        "time_stamp": getTimeStamp(),
        "utm": utm,
        "device": mobile
      });

      console.log("📦 방문자 전송 데이터:", data);

      axios.get(`${addrScript}?action=insert&table=visitors&data=${data}`)
        .then(res => console.log("✅ 방문자 저장 성공:", res.data))
        .catch(err => console.error("❌ 방문자 저장 실패:", err));
    }

    function getIP(json) {
      try {
        ip = json.ip;
      } catch (e) {
        ip = 'unknown';
      }
      sendVisitorInfo(); // ip 받은 후 실행
    }

    $(document).ready(function () {
      $("#submit").on("click", function () {
        const email = $("#submit-email").val();
        const advice = $("#submit-advice").val();

        function validateEmail(email) {
          return /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(email);
        }

        if (!email || !validateEmail(email)) {
          alert("이메일이 유효하지 않습니다.");
          return;
        }

        $.busyLoadFull("show");

        const finalData = JSON.stringify({
          "id": getUVfromCookie(),
          "email": email,
          "advice": advice
        });

        axios.get(`${addrScript}?action=insert&table=tab_final&data=${finalData}`)
          .then(res => {
            $.busyLoadFull("hide");
            $('#submit-email').val('');
            $('#submit-advice').val('');
            $.fn.simplePopup({ type: "html", htmlSelector: "#popup" });
          })
          .catch(err => {
            $.busyLoadFull("hide");
            alert("제출 중 오류 발생");
            console.error(err);
          });
      });
    });
  </script>

  <!-- 반드시 sendVisitorInfo 정의 이후에 jsonip 로드 -->
  <script src="https://jsonip.com?format=jsonp&callback=getIP"></script>

  <footer style="font-size: 12px; color: #75757582; text-align: center; padding: 10px;">
    이 사이트의 모든 이미지 및 콘텐츠는 제작자에게 저작권이 있으며, 무단 복제 및 사용을 금지합니다. ⓒ 2025 PIXELBRACHIO
  </footer>
</body>
</html>
